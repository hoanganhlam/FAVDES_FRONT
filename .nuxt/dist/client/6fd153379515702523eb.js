(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{403:function(t,e,n){var content=n(405);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("741ef5f5",content,!0,{sourceMap:!1})},404:function(t,e,n){"use strict";var r=n(403);n.n(r).a},405:function(t,e,n){(e=n(9)(!1)).push([t.i,".profile{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;min-height:calc(100vh - 53px)}.profile .media:not(:last-child){margin-bottom:1rem}.profile .media:not(:last-child) .media-content{overflow:unset}.profile .hero:last-child{-webkit-box-flex:1;flex:1}",""]),t.exports=e},410:function(t,e,n){"use strict";n.r(e);n(31),n(278),n(5);var r,o,l=n(3),c={name:"ProfileDetail",components:{Destination:n(42).a},watchQuery:["page"],asyncData:(o=Object(l.a)(regeneratorRuntime.mark((function t(e){var n,r,o,l,c,d,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.$api,r=e.params,o=e.store,l=e.query,c=null,d={page_size:9,page:Number.parseInt(l.page)||1},!r.username){t.next=9;break}return t.next=6,n.user.get(r.username);case 6:c=t.sent,d.target_content=o.state.config.contentTypes.user,d.target=c.id;case 9:return t.next=11,n.activity.list(d);case 11:return m=t.sent,t.t0=c,t.t1=m,t.t2=c&&c.profile?c.profile:{},t.t3=d,t.next=18,n.destination.list({page_size:3,user:c?c.id:void 0});case 18:return t.t4=t.sent,t.abrupt("return",{user:t.t0,activityRes:t.t1,profile:t.t2,queries:t.t3,responseD:t.t4});case 20:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)}),head:function(){return{title:this.convertName(this.user)}},data:function(){return{isUpdate:!1,loading:!1,activeTab:0,baseTabs:[{label:"Pictures",content:"Lorem ipsum dolor sit amet.",displayed:!0},{label:"Music",content:"Lorem ipsum dolor sit amet.",displayed:this.showMusic},{label:"Videos",content:"Lorem ipsum dolor sit amet.",displayed:!0}]}},methods:{updateProfile:(r=Object(l.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,(data=this.cleanData(this.user)).profile={media:this.profile.media?this.profile.media.id:null,description:this.profile.description},t.next=5,this.$api.user.update(this.user.username,data);case 5:this.loading=!1,this.isUpdate=!1;case 7:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},computed:{updating:function(){return this.$route.query.updating||this.isUpdate}},mounted:function(){var t=this;this.toTop(),this.$nextTick((function(){t.reLayout()}))},updated:function(){this.reLayout()}},d=(n(404),n(1)),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"profile"},[n("div",{staticClass:"hero"},[n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container small"},[n("div",{staticClass:"media"},[n("div",{staticClass:"media-left"},[n("Avatar",{staticClass:"is-128x128",attrs:{"can-update":t.updating,name:t.convertName(t.user)},model:{value:t.profile.media,callback:function(e){t.$set(t.profile,"media",e)},expression:"profile.media"}})],1),t._v(" "),n("div",{staticClass:"media-content"},[t.updating?n("b-field",{staticClass:"title",attrs:{grouped:""}},[n("b-field",{attrs:{expanded:""}},[n("b-input",{staticClass:"is-text",attrs:{placeholder:"First name"},model:{value:t.user.first_name,callback:function(e){t.$set(t.user,"first_name",e)},expression:"user.first_name"}})],1),t._v(" "),n("b-field",{attrs:{expanded:""}},[n("b-input",{staticClass:"is-text",attrs:{placeholder:"Last name"},model:{value:t.user.last_name,callback:function(e){t.$set(t.user,"last_name",e)},expression:"user.last_name"}})],1)],1):n("h1",{staticClass:"title"},[t._v(t._s(t.convertName(t.user)))])],1),t._v(" "),t.updating?t._e():n("div",{staticClass:"media-right"},[n("div",{staticClass:"buttons"},[n("follow",{attrs:{model:"user",pk:t.user.id,value:t.user.is_following}}),t._v(" "),n("b-dropdown",{attrs:{position:"is-bottom-left","aria-role":"menu"}},[n("div",{staticClass:"button",attrs:{slot:"trigger"},slot:"trigger"},[n("b-icon",{attrs:{icon:"dots-vertical",size:"is-small"}})],1),t._v(" "),n("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){t.isUpdate=!t.isUpdate}}},[n("b-icon",{attrs:{size:"is-small",icon:"pen"}}),t._v(" "),n("span",[t._v("Update Profile")])],1),t._v(" "),n("b-dropdown-item",{attrs:{"aria-role":"listitem"},on:{click:function(e){return t.$auth.logout()}}},[n("b-icon",{attrs:{size:"is-small",icon:"exit-to-app"}}),t._v(" "),n("span",[t._v("Logout")])],1)],1)],1)])]),t._v(" "),n("div",{staticClass:"subtitle"},[n("editable",{attrs:{placeholder:"Bio",type:"textarea",rows:2,"is-updating":t.updating},model:{value:t.profile.description,callback:function(e){t.$set(t.profile,"description",e)},expression:"profile.description"}})],1),t._v(" "),t.updating?n("div",[n("div",{staticClass:"button is-primary is-medium",on:{click:t.updateProfile}},[t._v("Save")])]):t._e(),t._v(" "),n("b-loading",{attrs:{"is-full-page":!1,active:t.loading,"can-cancel":!0},on:{"update:active":function(e){t.loading=e}}})],1)])]),t._v(" "),n("div",{staticClass:"section has-background-light"},[n("div",{staticClass:"container"},[n("div",{staticClass:"columns is-multiline"},t._l(t.responseD.results,(function(t,i){return n("div",{key:i,staticClass:"column is-4"},[n("destination",{attrs:{value:t}})],1)})),0)])]),t._v(" "),t.updating?t._e():n("div",{staticClass:"hero"},[n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container"},[n("activity-list",{attrs:{value:t.activityRes,q:t.queries}})],1)])])])}),[],!1,null,null,null);e.default=component.exports}}]);