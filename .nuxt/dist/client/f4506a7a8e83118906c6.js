(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{415:function(t,e,n){"use strict";n.r(e);n(41),n(23),n(16),n(14),n(26);var r=n(6),o=(n(24),n(32),n(31),n(279),n(5),n(3));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d,h,v={name:"HomePage",components:{Destination:n(55).a},asyncData:(h=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,r,o,c,d,q,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.$api,r=e.params,o=e.query,c=e.store,d=null,q={page:Number.parseInt(o.page)||1,page_size:9},r.flag&&(q.hashtag=r.flag),!r.destination||["hashtag","anywhere"].includes(r.destination)){t.next=9;break}return t.next=7,n.destination.get(r.destination);case 7:d=t.sent,q.destination=d.id;case 9:return t.next=11,n.activity.list(q);case 11:return h=t.sent,c.commit("config/SET_TARGET",l({},d)),c.commit("config/SET_TARGET_MODEL","destination"),t.t0=d,t.t1=h,t.t2=q,t.next=19,n.destination.list({page_size:3});case 19:return t.t3=t.sent,t.abrupt("return",{destination:t.t0,response:t.t1,q:t.t2,responseD:t.t3});case 21:case"end":return t.stop()}}),t)}))),function(t){return h.apply(this,arguments)}),data:function(){return{updating:!1}},head:function(){return{title:this.title}},methods:{handleClick:function(){this.updating?this.push():this.updating=!0},push:(d=Object(o.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(data=this.cleanData(this.destination),!this.destination.id){t.next=4;break}return t.next=4,this.$api.destination.update(this.destination.slug,data);case 4:this.updating=!1;case 5:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},computed:{title:function(){var t=this.$route.params;return this.$auth.loggedIn&&void 0===t.activity&&void 0===t.flag?"Welcome, ".concat(this.convertName(this.$auth.user)):t.flag?this.destination?this.subtitle+" in ".concat(this.destination.title):this.subtitle:t.destination?"".concat(this.destination.title):"9Destination - Get inspired and share your best moment!"},subtitle:function(){return"#"+this.$route.params.flag},tag_line:function(){return this.$auth.loggedIn?"Get inspired and share your moment!":"Get inspired and share your best moment!"}},mounted:function(){this.toTop()}},m=n(1),component=Object(m.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"destination-page"},[n("section",{staticClass:"hero"},[n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container small"},[n("div",{staticClass:"content has-text-centered"},[n("h1",{staticClass:"title is-spaced"},[t._v(t._s(t.title)+" "),n("span",{staticClass:"tag"},[t._v("Checkin and Photos")])]),t._v(" "),n("p",{staticClass:"subtitle"},[t.destination?n("editable",{attrs:{icon:"text",type:"textarea","is-updating":t.updating},model:{value:t.destination.description,callback:function(e){t.$set(t.destination,"description",e)},expression:"destination.description"}}):n("span",[t._v(t._s(t.tag_line))])],1)]),t._v(" "),t.updating&&t.destination&&t.destination.photos?n("div",{staticClass:"columns is-mobile"},[t._l(t.destination.photos,(function(p){return n("div",{key:p.id,staticClass:"column is-3"},[n("div",{staticClass:"image"},[n("img",{attrs:{src:p.sizes["270_270"],alt:""}})])])})),t._v(" "),n("div",{staticClass:"column",class:{"is-3":t.destination.photos.length}},[n("Upload",{on:{done:function(e){t.destination.photos=e}}})],1)],2):t._e(),t._v(" "),n("div",{staticClass:"buttons",staticStyle:{"justify-content":"center"}},[n("b-dropdown",{staticStyle:{"margin-right":"0.5rem"},attrs:{"aria-role":"list"}},[n("button",{staticClass:"button",attrs:{slot:"trigger"},slot:"trigger"},[n("b-icon",{attrs:{size:"is-small",icon:"fire"}})],1),t._v(" "),n("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("Hot")]),t._v(" "),n("b-dropdown-item",{attrs:{"aria-role":"listitem"}},[t._v("New")])],1),t._v(" "),t.destination?n("follow",{attrs:{model:"destination",pk:t.destination.id}}):t._e(),t._v(" "),n("div",{staticClass:"button"},[n("b-icon",{attrs:{size:"is-small",icon:"refresh"}})],1),t._v(" "),t.destination&&t.currentUser?n("div",{staticClass:"button",class:{"is-success":t.updating},on:{click:t.handleClick}},[n("b-icon",{attrs:{size:"is-small",icon:t.updating?"check":"pen"}})],1):t._e()],1)])])]),t._v(" "),n("section",{staticClass:"hero"},[n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container"},[n("activity-list",{attrs:{q:t.q,value:t.response}},[n("h5",{staticClass:"widget_title"},[t._v("Check-ins "),n("span",{staticClass:"tag"},[t._v("page "+t._s(t.q.page))])])])],1)])]),t._v(" "),1===t.q.page?n("section",{staticClass:"hero"},[n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container has-text-centered"},[n("h3",{staticClass:"title"},[t._v("Near with "+t._s(t.destination.title))]),t._v(" "),n("div",{staticClass:"buttons",staticStyle:{"justify-content":"center"}},t._l(t.responseD.results,(function(e){return n("div",{key:e.id,staticClass:"button is-rounded is-large"},[n("n-link",{staticClass:"media",staticStyle:{"justify-content":"center"},attrs:{to:"/"+e.slug}},[n("div",{staticClass:"media-left"},[n("avatar",{staticClass:"is-32x32",attrs:{value:e.temp_media}})],1),t._v(" "),n("div",{staticClass:"media-content"},[t._v(t._s(e.title))])])],1)})),0)])])]):t._e()])}),[],!1,null,null,null);e.default=component.exports}}]);